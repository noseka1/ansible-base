- import_tasks: delete_kafdrop.yml
  vars:
    amqstreams_kafdrop_namespace: '{{ amqstreams_kafka_single_namespace }}'

- name: Delete Kafka instance
  kubernetes.core.k8s:
    definition: "{{ lookup('url', item, split_lines=false) }}"
    namespace: '{{ amqstreams_kafka_single_namespace }}'
    state: absent
  loop:
    - '{{ amqstreams_examples }}/kafka/kafka-persistent-single.yaml'

- name: Delete namespace
  kubernetes.core.k8s:
    template: kafka-single/namespace.yaml
    state: absent
