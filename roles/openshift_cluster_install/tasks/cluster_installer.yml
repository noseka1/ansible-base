- name: Create cluster configuration directory {{ osclusterinstall_info.config_dir }}
  file:
    path: '{{ osclusterinstall_info.config_dir }}'
    state: directory
    mode: '0755'

- name: Download openshift-install archive {{ osclusterinstall_installer_url }}
  get_url:
    url: '{{ osclusterinstall_installer_url }}'
    dest: '{{ osclusterinstall_info.config_dir }}/{{ osclusterinstall_installer_url | basename }}'
  retries: 3

- name: Extract openshift-install
  unarchive:
    src: '{{ osclusterinstall_info.config_dir }}/{{ osclusterinstall_installer_url | basename }}'
    dest: '{{ osclusterinstall_info.config_dir }}'
    exclude:
      - README.md

- name: Get installer info
  command: '{{ osclusterinstall_info.config_dir }}/openshift-install version'
  changed_when: false
  register: osclusterinstall_installer_version

- name: Show installer info
  debug:
    var: osclusterinstall_installer_version.stdout_lines
