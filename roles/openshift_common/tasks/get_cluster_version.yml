- name: Obtain clusterversion info
  kubernetes.core.k8s_info:
    api_version: config.openshift.io/v1
    kind: ClusterVersion
    name: version
  register: oscommon_clusterversion_result

- set_fact:
    oscommon_cluster_uuid: >-
      {{ oscommon_clusterversion_result.resources.0.spec.clusterID }}
    oscommon_cluster_version_str: >-
      {{ oscommon_clusterversion_result.resources.0.status.desired.version }}
    oscommon_cluster_version_list: >-
      {{ oscommon_clusterversion_result.resources.0.status.desired.version.split('.') }}
    oscommon_cluster_version_major: >-
      {{ oscommon_clusterversion_result.resources.0.status.desired.version.split('.').0 }}
    oscommon_cluster_version_minor: >-
      {{ oscommon_clusterversion_result.resources.0.status.desired.version.split('.').1 }}
    oscommon_cluster_version_patch: >-
      {{ oscommon_clusterversion_result.resources.0.status.desired.version.split('.').2 }}
    oscommon_cluster_version_majorminor: >-
      {{ oscommon_clusterversion_result.resources.0.status.desired.version.split('.').0 + '.' +
         oscommon_clusterversion_result.resources.0.status.desired.version.split('.').1 }}
