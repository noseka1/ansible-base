- name: Obtain all storage class objects
  kubernetes.core.k8s_info:
    api_version: storage.k8s.io/v1
    kind: StorageClass
  register: oscommon_storage_classes_result

- set_fact:
    oscommon_default_storage_class: >-
      {{ oscommon_storage_classes_result.resources | json_query('[?metadata.annotations."storageclass.kubernetes.io/is-default-class"==`"true"`].metadata.name | [0]') }}
    oscommon_default_virt_storage_class: >-
      {{ oscommon_storage_classes_result.resources | json_query('[?metadata.annotations."storageclass.kubevirt.io/is-default-virt-class"==`"true"`].metadata.name | [0]') }}
