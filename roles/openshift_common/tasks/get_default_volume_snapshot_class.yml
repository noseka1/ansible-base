- name: Obtain all volume snapshot class objects
  kubernetes.core.k8s_info:
    api_version: snapshot.storage.k8s.io/v1
    kind: VolumeSnapshotClass
  register: oscommon_volume_snapshot_classes_result

- set_fact:
    oscommon_default_volume_snapshot_class: >-
      {{ oscommon_volume_snapshot_classes_result.resources | json_query('[?metadata.annotations."snapshot.storage.kubernetes.io/is-default-class"==`"true"`].metadata.name | [0]') }}
