apiVersion: operator.openshift.io/v1alpha1
kind: ExternalSecretsConfig
metadata:
  name: cluster
spec:
  appConfig:
    # Supports the value range of 1-5. The log level gets mapped to the following operand support levels:
    # 1 - warnings
    # 2 - error logs
    # 3 - info logs
    # 4 and 5 - debug logs
    logLevel: 1
{% if extsecrets_place_on_infra_nodes %}
    nodeSelector:
      node-role.kubernetes.io/infra: ""
    tolerations:
    - key: node-role.kubernetes.io/infra
      effect: NoSchedule
      operator: Exists
{% endif %}
  controllerConfig:
    networkPolicies:
    - componentName: ExternalSecretsCoreController
      egress:
        # Allow egress to HashiCorp Vault
        - ports:
          - port: 443
            protocol: TCP
      name: allow-external-secrets-egress
