- import_role:
    name: openshift_oauth_proxy
    tasks_from: delete.yml
  vars:
    oauth_proxy_app_prefix: goldilocks-

- name: Delete Goldilocks
  kubernetes.core.helm:
    name: '{{ goldilocks_name }}'
    release_namespace: '{{ goldilocks_namespace }}'
    state: absent
    wait: true

- name: Delete goldilocks namespace
  kubernetes.core.k8s:
    template:
      - goldilocks-controller-fix-clusterrolebinding.yaml
      - goldilocks-controller-fix-clusterrole.yaml
      - goldilocks-ns.yaml
