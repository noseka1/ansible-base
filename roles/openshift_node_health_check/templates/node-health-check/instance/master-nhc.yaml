apiVersion: remediation.medik8s.io/v1alpha1
kind: NodeHealthCheck
metadata:
  name: master
spec:
  # The Node Health Check Operator implements a hard-coded limitation of remediating
  # a maximum of one control plane node at a time. Multiple control plane nodes
  # should not be remediated at the same time.
  #
  # See also:
  # https://docs.redhat.com/en/documentation/workload_availability_for_red_hat_openshift/25.8/html/remediation_fencing_and_maintenance/node-health-check-operator#control-plane-fencing-node-health-check-operator_node-health-check-operator
  minHealthy: 60%
  remediationTemplate:
    apiVersion: fence-agents-remediation.medik8s.io/v1alpha1
    kind: FenceAgentsRemediationTemplate
    name: remediation
    namespace: openshift-workload-availability
  unhealthyConditions:
  - status: 'False'
    duration: 8m
    type: Ready
  - status: Unknown
    duration: 15m
    type: Ready
  selector:
    matchExpressions:
    - key: node-role.kubernetes.io/control-plane
      operator: Exists
