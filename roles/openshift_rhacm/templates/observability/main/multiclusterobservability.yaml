apiVersion: observability.open-cluster-management.io/v1beta2
kind: MultiClusterObservability
metadata:
  name: observability
spec:
  advanced:
    retentionConfig:
      retentionResolution1h: 30d # How long to retain samples of 1 hour in bucket
      retentionResolution5m: 14d
      retentionResolutionRaw: 5d
  capabilities:
    platform:
      analytics:
        # Enable RightSizing Recommendation dashboards in the RHACM's Grafana
        # See also https://docs.redhat.com/en/documentation/red_hat_advanced_cluster_management_for_kubernetes/2.15/html-single/observability/index#optimize-work-right-size
        namespaceRightSizingRecommendation:
          enabled: true
        virtualizationRightSizingRecommendation:
          enabled: true
  # Observability instance size, allowed values: default, minimal, small, medium,
  # large, xlarge, 2xlarge, 4xlarge
  instanceSize: {{ rhacm_observability_instance_size }}
  imagePullPolicy: IfNotPresent
  observabilityAddonSpec: # The ObservabilityAddonSpec defines the global settings for all managed clusters which have observability add-on enabled
    enableMetrics: true # EnableMetrics indicates the observability addon push metrics to hub server
    interval: 60 # Interval for the observability addon push metrics to hub server
  storageConfig: # Specifies the storage to be used by Observability
    metricObjectStorage:
      name: thanos-object-storage
      key: thanos.yaml
