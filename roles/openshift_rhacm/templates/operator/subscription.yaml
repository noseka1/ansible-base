apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: advanced-cluster-management
  namespace: open-cluster-management
spec:
  channel: {{ rhacm_operator_subscription_channel | default('""', true) }}
  installPlanApproval: Manual
  name: advanced-cluster-management
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  startingCSV: {{ rhacm_operator_subscription_starting_csv | default('""', true) }}
  config:
    env:
    # HTTP proxy settings
    # If no proxy settings are specified here then the cluster-wide proxy settings found in the status
    # field of the Proxy resource are injected.
    - name: HTTP_PROXY
      value: ""
    - name: HTTPS_PROXY
      value: ""
    - name: NO_PROXY
      value: ""
{% if rhacm_place_on_infra_nodes %}
    nodeSelector:
      node-role.kubernetes.io/infra: ""
    tolerations:
    - key: node-role.kubernetes.io/infra
      effect: NoSchedule
      operator: Exists
{% endif %}
