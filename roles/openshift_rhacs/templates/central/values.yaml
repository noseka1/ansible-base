deploymentMode: {{ rhacs_deployment_mode }}

# If RHACS is not connected to the Internet, set this to 'Offline' to enable offline mode
centralConnectivityPolicy: {{ rhacs_central_connectivity_policy }}

# Use custom certificate for Central ingress instead of the self-signed one
{% if rhacs_central_default_tls_cert[openshift_common_cluster_domain] is defined %}
centralDefaultTlsCrt: '{{ rhacs_central_default_tls_cert[openshift_common_cluster_domain].crt }}'
centralDefaultTlsKey: '{{ rhacs_central_default_tls_cert[openshift_common_cluster_domain].key }}'
{% endif %}

# CA certificates that will be added to the RHACS trusted certificates
additionalTrustedCa: |
  {{ rhacs_additional_trusted_ca | indent(2) }}

centralAdminPasswordPlain: '{{ generic_user_password }}'
centralAdminPasswordHash: '{{ generic_user_password | string | password_hash("bcrypt", "constant1234567890123.") }}'
centralDbPassword: '{{ generic_user_password }}'
scannerDbPassword: '{{ generic_user_password }}'

logLevel: '{{ rhacs_loglevel }}'
roxNetworkAccessLog: '{{ rhacs_rox_network_access_log }}'
roxGrpcEnableRequestTracing: '{{ rhacs_rox_grpc_enable_request_tracing }}'
roxDisableAutogeneratedRegistries: '{{ rhacs_rox_disable_autogenerated_registries }}'

annotations:
  # These annotations make the central-reencrypt route work with OIDC. The annotations are required to be
  # attached to the central serviceaccount object only. Unfortunately, the operator configuration doesn't
  # allow attaching annotations to a select object. The annotations are attached to all managed objects
  # even when not necessary.
  serviceaccounts.openshift.io/oauth-redirectreference.custom: >-
    {"kind":"OAuthRedirectReference","apiVersion":"v1","reference":{"kind":"Route","name":"central-reencrypt"}}
  serviceaccounts.openshift.io/oauth-redirecturi.custom: sso/providers/openshift/callback
